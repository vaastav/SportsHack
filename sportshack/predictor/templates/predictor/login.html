{% extends "predictor/layout.html" %}

{% block content %}

<div id = "loginContainer" class="logo">
    <div class="login-block">
            <h3 class="center-align">Login</h3>
            <div class="row">
                <form class="col s12">
                    <div class="row">
                        <div class="input-field col s12">
                            <input id="email" type="email" placeholder = "Email" class = "validate">
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12">
                            <input id="password" type="password" placeholder = "Password" class="validate">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s12">
                            <p>
                                <input type="checkbox" id="remember">
                                <label for="remember">Remember me</label>
                            </p>
                        </div>
                    </div>
                    <div class="divider"></div>
                    <div class="row">
                    	<div class="col m12">
                            
                                <p id="invalidInput" class = "center-align"></p>
                                <p class="center-align">    
                                <button type="button" onclick = "logUserIn()" name="action">Login</button>                                
                            </p>
                        </div>
                        <div class="col m12">
                            <p class="center-align">
                                <button type="button" onclick="location.href='../signup';" name="action">Signup</button>
                                
                            </p>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        
        </div>
    

        <script>
        function logUserIn(){
		
        
        //check if input is valid
        var pass = document.getElementById('password').value;
        var email = document.getElementById('email').value;
                
        var ref = new Firebase("https://sportshack.firebaseio.com/");
		

        ref.authWithPassword({
          email    : email,
          password : password
        }, function(error, authData) {
          if (error) {
			document.getElementById('invalidInput').innerHTML = "Login Failed Try again";
          } else {
			if (document.getElementById('remember').value = "on"){
			    var d = new Date();
				d.setTime(d.getTime() + (30*24*60*60*1000));
				var expires = "expires="+d.toUTCString();
				document.cookie= "storedUser=" + email +"; " + expires;
				document.cookie= "storedPassword="+ password +"; " + expires;
			}
			
			else {
			    var d = new Date();
				d.setTime(d.getTime() + (1*24*60*60*1000));
				var expires = "expires="+d.toUTCString();
				document.cookie= "storedUser=" + email +"; " + expires;
				document.cookie= "storedPassword="+ password +"; " + expires;			
			}
			
				window.location.href = '../home';		
          }
        });
        //check if they wanted to save the data 
      }
      </script>
       <style>
    .logo {
    width: 213px;
    height: 36px;
    background: url('../images/background.png') no-repeat;
    margin: 30px auto;
}

.login-block {
    width: 320px;
    padding: 20px;
    background: #fff;
    border-radius: 5px;
    border-top: 5px solid #ff656c;
    margin: 0 auto;
}

.login-block h1 {
    text-align: center;
    color: #000;
    font-size: 18px;
    text-transform: uppercase;
    margin-top: 0;
    margin-bottom: 20px;
}

.login-block input {
    width: 100%;
    height: 42px;
    box-sizing: border-box;
    border-radius: 5px;
    border: 1px solid #ccc;
    margin-bottom: 20px;
    font-size: 14px;
    font-family: Montserrat;
    padding: 0 20px 0 50px;
    outline: none;
}

.login-block input#email {
    background: #fff url('http://i.imgur.com/u0XmBmv.png') 20px top no-repeat;
    background-size: 16px 80px;
}

.login-block input#email:focus {
    background: #fff url('http://i.imgur.com/u0XmBmv.png') 20px bottom no-repeat;
    background-size: 16px 80px;
}

.login-block input#password {
    background: #fff url('http://i.imgur.com/Qf83FTt.png') 20px top no-repeat;
    background-size: 16px 80px;
}

.login-block input#password:focus {
    background: #fff url('http://i.imgur.com/Qf83FTt.png') 20px bottom no-repeat;
    background-size: 16px 80px;
}

.login-block input:active, .login-block input:focus {
    border: 1px solid #ff656c;
}

.login-block button {
    width: 100%;
    height: 40px;
    background: #ff656c;
    box-sizing: border-box;
    border-radius: 5px;
    border: 1px solid #e15960;
    color: #fff;
    font-weight: bold;
    text-transform: uppercase;
    font-size: 14px;
    font-family: Montserrat;
    outline: none;
    cursor: pointer;
}

.login-block button:hover {
    background: #ff7b81;
}
    </style>

{% endblock %}
